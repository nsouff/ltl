\documentclass[12pt,a4paper]{article}

\usepackage[french]{babel}
\usepackage[T1]{fontenc}

\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{mathrsfs}

\usepackage{tikz}
\usetikzlibrary{automata, positioning, arrows}

\usepackage{enumerate} 

% quelques définitions
\theoremstyle{plain}
\newtheorem{thm}{Théorème}
\newtheorem{cor}[thm]{Corollaire}
\newtheorem{lem}[thm]{Lemme}
\newtheorem{prop}{Proposition}
\newtheorem{dem}{Démonstration}

\theoremstyle{definition}
\newtheorem{defi}{Définition}
\newtheorem{rmq}{Remarque}
\newtheorem{ex}{Exemple}

\title {Automates et logique temporelle LTL}
\author{
  Souffan Nathan \and
  Bouarah Romain \and
  \\Supervisé par François Laroussinie
}


\begin{document}
\maketitle
\tableofcontents

\section{Automate de Büchi}
Les automates de Büchi sont un type particulier d'automate sur les mots infinis.
Les automates sur les mots infinis (ou $\omega$-automates) sont des automates finis qui acceptent des mots infinis.

\begin{defi}[Automate de Büchi]
  Un automate de Büchi est un quintuplet $\mathcal{A}=(\Sigma, Q, Q_I, \Delta, \mathscr{F})$ où :
  \begin{itemize}
  \item $\Sigma$ est un ensemble fini appelé alphabet de $\mathcal{A}$.
  \item $Q$ est un ensemble fini. Les éléments de $Q$ sont les états de $\mathcal{A}$.
  \item $Q_I \subseteq Q$ est l'ensemble des états initiaux.
  \item $\Delta \subset Q \times \Sigma \times Q$ est l'ensemble des transitions.
  \item $\mathscr{F} \subseteq Q$ est l'ensemble des états finaux (ou états acceptants).
    Un mot $w$ est accepté s'il existe une exécution acceptante de $\mathcal{A}$ sur $w$.
  \end{itemize}
\end{defi}

\begin{defi}[Exécution]
  Soient $w \in \Sigma^\omega$ un mot infini et $\mathcal{A}=(\Sigma, Q, Q_I, \Delta, \mathscr{F})$ un automate de Büchi.
  Une exécution de $\mathcal{A}$ sur $w$ est une suite infinie $\rho = q_0q_1q_2\dots \in Q^\omega$ telle que :
  \[
    \forall i \geq 0 \quad (q_i, w_i, q_{i+1}) \in \Delta
  \]
\end{defi}

\begin{defi}[Exécution acceptante]  
  Soient $\mathcal{A}=(\Sigma, Q, Q_I, \Delta, \mathscr{F})$ un automate de Büchi et $\rho \in Q^\omega$ une exécution de $\mathcal{A}$.
  On dit que $\rho$ est une exécution acceptante si :
  \[
    Etats_{\#\infty}(\rho) \cap \mathscr{F} \neq \varnothing
  \]
  où $Etats_{\#\infty}(\rho)$ est l'ensemble des états apparaissants une infinité de fois dans $\rho$.
\end{defi}

% \begin{defi}[Trace]
%   La trace (aussi appelée étiquette) d'une exécution est la suite des lettres, donc un mot.
%   Si on a pour exécution $\rho = (q_0,a_0,q_1)(q_1,a_1,q_2)\dots$ alors la trace de $\rho$ est le mot $a_0a_1\dots$.
% \end{defi}

\begin{ex}
  Soit $\mathcal{A}=(\{a,b\}, \{q_0, q_1\}, \{q_0\}, \Delta, \{q_1\})$ un automate de Büchi.
  L'ensemble des transitions $\Delta$ est donné dans la figure.
  \begin{figure}[h]
    \centering
    \begin{tikzpicture}[->, >=stealth, node distance=3cm, initial text=$ $, on grid]
      \node[state, initial] (q0) {$q_0$};
      \node[state, accepting, right of=q0] (q1) {$q_1$};
      \draw (q0) edge[bend left, above] node{a} (q1)
      (q1) edge[bend left, below] node{b} (q0)
      (q1) edge[loop above] node{a} (q1);
    \end{tikzpicture}    
    \caption{Automate de Büchi}
  \end{figure}
  
  Cet automate reconnaît le mot $w = aaa\dots$ car pour l'exécution $\rho = q_0q_1^\omega$ (c'est la seule) de $\mathcal{A}$ sur $w$, l'état $q_1$ apparaît une infinité de fois dans $\rho$.
  En fait, le langage reconnu (ou accepté) est $aa^\omega | a(a^*ba)^\omega$.
\end{ex}

Les automates de Büchi généralisés sont une variante des automates de Büchi.
La différence se situe sur la condition d'acceptation.
\begin{defi}[Automate de Büchi généralisé]
  Un automate de Büchi généralisé est un quintuplet $\mathcal{A}=(\Sigma, Q, Q_I, \Delta, \mathscr{F})$ où :
  \begin{itemize}
  \item $\Sigma, Q, Q_I, \Delta$ sont comme précédemment.
  \item $\mathscr{F} \subseteq \mathcal{P}(Q)$ est la condition d'acceptation.
    $\mathscr{F}$ est un ensemble d'ensembles finaux. De même, un mot $w$ est accepté s'il existe une exécution acceptante de $\mathcal{A}$ sur $w$.
  \end{itemize}
  
\end{defi}
Pour un automate de Büchi généralisé, une exécution $\rho$ de $\mathcal{A}$ est acceptante si :
\[
  \forall F \in \mathscr{F} \quad Etats_{\#\infty}(\rho) \cap F \neq \varnothing
\]

\subsection{Traduction de formule LTL en automate de Büchi}
On souhaite ``traduire'' une formule LTL en un automate de Büchi. Plus précisément, on veut construire un automate qui reconnait les modèles de $\varphi$.

\begin{defi}
  On note $SubF(\varphi)$ l'ensemble des sous formules de $\varphi$ et leur négation.  
\end{defi}

\begin{ex}
  Si $\varphi = a U b$ alors $SubF(\varphi) = \{ a, \lnot a, b, \lnot b, a U b, \lnot(a U b)\}$.
\end{ex}

\begin{defi}[Sous-ensemble cohérent]
  $q \in 2^{SubF(\varphi)}$ est cohérent si toutes les conditions suivantes sont vérifiées :
  \begin{enumerate}[(i)]
  \item $\bot \not \in q$.
  \item Si $\psi_1 \land \psi_2 \in q$ alors $\psi_1 \in q$ et $\psi_2 \in q$.
  \item Si $\psi_1 \lor \psi_2 \in q$ alors $\psi_1 \in q$ ou $\psi_2 \in q$.
  \item $\psi \in q \iff \lnot \psi \not\in q$.
  \end{enumerate}
\end{defi}

\begin{rmq}
  En utilisant les lois de Morgan, on en déduit aussi que :
  \begin{enumerate}[(i)]
  \item Si $\lnot (\psi_1 \land \psi_2) \in q$ alors $\psi_1 \not \in q$ ou $\psi_2 \not \in q$.
  \item Si $\lnot (\psi_1 \lor \psi_2) \in q$ alors $\psi_1 \not \in q$ et $\psi_2 \not \in q$.
  \end{enumerate}
\end{rmq}


\begin{defi}[Sous-ensemble maximal]
  $q \in 2^{SubF(\varphi)}$ est maximal si pour tout $\psi \in SubF(\varphi)$ on a soit $\psi \in q$ soit $\lnot \psi \in q$.  
\end{defi}

\begin{defi}[Sous-ensemble conforme à la sémantique de LTL]
  $q \in 2^{SubF(\varphi)}$ est conforme à la sémantique de LTL :
  \begin{enumerate}[(i)]
  \item Si $\psi_1 U \psi_2 \in q$ alors on a soit $\psi_1 \in q$ soit $\psi_2 \in q$.
  \item Si $\psi_1 U \psi_2 \in SubF(\varphi)$, alors si $\psi_2 \in q$, $\psi_1 U \psi_2 \in q$.
  \end{enumerate}
\end{defi}

\begin{ex}
  Soit $\varphi = a U (Xb)$ alors
  \[
    SubF(\varphi) = \{a, \lnot a, b, \lnot b, Xb, \lnot (Xb), a U (Xb), \lnot (aU(Xb))\}
  \]
  \begin{enumerate}
  \item $q_1 = \{\lnot a, b, Xb, a U (Xb)\}$ est un sous-ensemble cohérent, maximal et conforme à la sémantique de LTL.
  \item ...
  \end{enumerate}
\end{ex}

\begin{thm}
  Soit $AP$ l'ensemble des propositions atomiques et $\varphi$ une formule LTL sur $AP$, alors $\mathcal{L}(\mathcal{A}_\varphi) = mod(\varphi)$
  où $\mathcal{A}_\varphi$ est l'automate de Büchi généralisé donné ci-dessous.

  % \noindent
  On définit $\mathcal{A}_\varphi = (2^{AP}, Q, Q_I, \Delta, \mathscr{F})$ où :
  \begin{itemize}
  \item $Q \subseteq 2^{SubF(\varphi)}$ contient tout les sous-ensembles de $SubF(\varphi)$ qui sont cohérents, maximaux et conformes à la sémantique de LTL.
  \item $Q_I = \{ q \subseteq SubF(\varphi) | \varphi \in q \}$. Autrement dit, tous les états contenant exactement notre formule de départ $\varphi$ sont des états initiaux.
  \item $\Delta$ est l'ensemble des transitions $(q, a, q')$ avec $q, q' \in Q$ et $a \in 2^{AP}$ vérifiant :
    \begin{itemize}
    \item $\forall p \in AP \quad p \in q \iff p \in a$ (i.e. $a$ possède toutes les propositions atomiques de $q$)
    \item $\forall X\psi \in SubF(\varphi) \quad X\psi \in q \iff \psi \in q'$
    \item $\forall \psi_1 U \psi_2 \in SubF(\varphi) \quad \psi_1 U \psi_2 \in q \iff \left( \psi_2 \in q \lor (\psi_1 \in q \land \psi_1 U \psi_2 \in q')\right)$
    \item $\forall \psi_1 \lor \psi_2 \in SubF(\varphi) \quad \psi_1 \lor \psi_2 \in q \iff (\psi_1 \in q' \lor \psi_2 \in q')$
    \item $\forall \psi_1 \land \psi_2 \in SubF(\varphi) \quad \psi_1 \land \psi_2 \in q \iff (\psi_1 \in q' \land \psi_2 \in q')$
    \item $\forall \lnot \psi \in SubF(\varphi)$
    \end{itemize}
  \item $\mathscr{F} = \{F_{\psi_1 U \psi_2} | \psi_1 U \psi_2 \in SubF(\varphi)\}$ où
    \[
      F_{\psi_1 U \psi_2} = \{q \in Q | \psi_1 U \psi_2 \not \in q \lor \psi_2\in q \}
    \]
  \end{itemize}
\end{thm}

\begin{proof}
  ...
\end{proof}

\end{document}